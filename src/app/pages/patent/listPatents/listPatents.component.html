<div style="margin-left: 0.5rem">
  <h3>
    <i class="fas fa-list"></i> Listado de patentes:
    <div style="float: right">
      <a class="btn btn-primary" routerLink="/agregarPatente">
        Agregar Patente <i class="fas fa-plus"></i
      ></a>
    </div>
  </h3>

  <strong>Saldo:</strong>${{ balance }}
  <a class="btn btn-primary ml-2" [routerLink]="['/editarCuenta', userId]"
    >Cargar <i class="fas fa-dollar-sign"></i>
  </a>
</div>
<div *ngIf="patents.length > 0">
  <div class="d-flex justify-content-between ml-2">
    <table class="table">
      <thead class="thead-light">
        <tr>
          <th scope="col">Patente</th>
          <th scope="col">Estacionamiento</th>
          <th scope="col">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="
            let patent of patents
              | paginate
                : {
                    itemsPerPage: 5,
                    currentPage: page,
                    totalItems: length
                  }
          "
        >
          <td>{{ patent.patent }}</td>
          <td>
            <button
              [disabled]="this.startedParking"
              class="btn btn-success ml-2"
              (click)="checkParking(patent.patent)"
            >
              Iniciar <i class="far fa-play-circle"></i>
            </button>
          </td>
          <td>
            <a
              class="btn btn-warning ml-2"
              [routerLink]="['/editar', patent.id]"
            >
              Editar <i class="far fa-edit"></i
            ></a>
            <a class="btn btn-danger ml-2" (click)="deleteById(patent)">
              Eliminar <i class="far fa-trash-alt"></i>
            </a>
          </td>
        </tr>
      </tbody>
    </table>

    <div
      *ngIf="startedParking"
      class="card border-danger mb-3"
      style="width: 25rem"
    >
      <div class="card-body">
        <h5 class="card-title">
          Estacionamiento Iniciado:
          <i class="fas fa-exclamation-triangle" style="color: red"></i>
        </h5>
        <hr />
        <p class="card-text">
          <i class="fas fa-arrow-right" style="color: green"></i> Patente:
          {{ timePrice?.patent }}
          <br />
          <i class="fas fa-stopwatch" style="color: dimgray"></i> Tiempo:
          {{ timePrice?.hours }}:{{ timePrice?.minutes }}
          hs
          <br />
          <i class="far fa-credit-card"></i> Costo: ${{ timePrice?.price }}
        </p>
        <button
          class="btn btn-dark ml-2"
          (click)="checkParking('')"
          [disabled]="!startedParking"
        >
          Finalizar
          <i class="fas fa-pause" style="color: red"></i>
        </button>
        <hr />
        <div style="color: grey">
          Atenci√≥n:
          <br />
          Debe finalizar el estacionamiento para editar/eliminar la patente
          {{ timePrice.patent }}
        </div>
      </div>
    </div>
  </div>

  <pagination-controls
    previousLabel="Anterior"
    nextLabel="Siguiente"
    (pageChange)="page = $event"
  ></pagination-controls>
</div>
<div *ngIf="patents.length == 0">
  <div class="card mb-3">
    <div class="card-body">
      <h5 class="card-title">No se encuentran patentes registradas</h5>
      <p class="card-text">
        Por favor, registre una patente para administrar su estacionamiento.
      </p>
    </div>
  </div>
</div>
